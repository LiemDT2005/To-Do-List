@model TodoList.Models.TodoListViewModel

@{
    ViewData["Title"] = "Home Page";
}

<div class="container py-4">
    <h1 class="text-center mb-4">📝 To-Do List</h1>

    <div class="card shadow-sm">
        <div class="card-body">

            <ul class="list-group">
                @foreach (var item in Model.Items)
                {
                    <li class="list-group-item d-flex justify-content-between align-items-center py-3
                            @(item.IsCompleted ? "list-group-item-success" : "")">

                        <div class="d-flex align-items-center">

                            <!-- Checkbox trạng thái -->
                            <form method="post" action="/Home/Complete" id="form-@item.Id">
                                <input type="hidden" name="id" value="@item.Id" />
                            </form>
                            <input type="checkbox"
                                   onchange="document.getElementById('form-@item.Id').submit();"
                                   class="form-check-input me-3"
                                   @(item.IsCompleted ? "checked" : "") />

                            <div class="">
                                <!-- Trạng thái -->
                                @if (item.IsCompleted)
                                {
                                    <span class="badge bg-success me-2">Completed</span>
                                }
                                else
                                {
                                    <span class="badge bg-warning text-dark me-2">Pending</span>
                                }

                                <!-- Text (gạch ngang nếu completed) -->
                                <span style="@(item.IsCompleted ? "text-decoration: line-through;" : "")">
                                    @item.Text
                                </span>
                            </div>
                        </div>

                        <div>
                            <a href="/Home/Edit/@item.Id" class="btn btn-outline-warning btn-sm me-1">Edit</a>
                            <a href="/Home/Delete/@item.Id"
                               class="btn btn-outline-danger btn-sm"
                               onclick="return confirm('Delete this item?');">
                                Delete
                            </a>
                        </div>

                    </li>
                }
            </ul>

        </div>
    </div>

    <div class="text-center mt-4">
        <a href="/Home/Add" class="btn btn-primary px-4 py-2">+ Add New Task</a>
    </div>
</div>
